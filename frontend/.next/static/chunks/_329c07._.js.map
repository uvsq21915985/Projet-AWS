{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/hedil/master/aws/Projet-AWS/frontend/src/shared/API_ROUTE.ts"],"sourcesContent":["export const API_ROUTE = {\n    login: \"http://ec2-34-224-60-168.compute-1.amazonaws.com:8000/api/login/\",\n    register: \"http://ec2-34-224-60-168.compute-1.amazonaws.com:8000/api/register/\",\n    validate:\"http://ec2-34-224-60-168.compute-1.amazonaws.com:8000/api/validate/\",\n    acess: \"http://localhost:8000/api/token\",\n    refresh:\"http://localhost:8000/api/token/refresh\"\n}"],"names":[],"mappings":";;;AAAO,MAAM,YAAY;IACrB,OAAO;IACP,UAAU;IACV,UAAS;IACT,OAAO;IACP,SAAQ;AACZ"}},
    {"offset": {"line": 20, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 26, "column": 0}, "map": {"version":3,"sources":["file:///home/hedil/master/aws/Projet-AWS/frontend/src/services/auth.ts"],"sourcesContent":["import { API_ROUTE } from \"@/shared/API_ROUTE\";\nimport { error } from \"console\";\nimport { ZCOOL_XiaoWei } from \"next/font/google\";\n\n\nexport async function login(data: FormData){\n    return fetch(\n        API_ROUTE.acess, {\n        method: \"POST\",\n        headers: {\n                'Content-Type': 'application/json'\n              },\n        body: JSON.stringify({\n            username: String(data.get(\"email\")),\n            password: String(data.get(\"password\"))\n        })\n    });\n}\n\n/*\n\nexport async function login(data: FormData){\n    return fetch(\n        API_ROUTE.login, {\n        method: \"POST\",\n        headers: {\n                'Content-Type': 'application/json'\n              },\n        body: JSON.stringify({\n            username: String(data.get(\"email\")),\n            password: String(data.get(\"password\"))\n        })\n    });\n}\n*/\nexport async function register(data: FormData){\n\n    return fetch(API_ROUTE.register,{\n         method: \"POST\",\n         headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            username: String(data.get(\"username\")),\n            email: String(data.get(\"email\")),\n            password: String(data.get(\"password\"))\n        })\n    });\n}\n\n\n// to validate a user using the token stored in the local storage ( for now )\nexport async function validate(token: String){\n\n    return fetch(API_ROUTE.validate,{\n         method: \"GET\",\n         headers: {\n            \"Authorization\": \"Token \"+token,\n            'Content-Type': 'application/json'\n          },\n        redirect: \"follow\"\n    });\n}\n\n/**the response to validate function has this structure \n * for example\n * {\n    \"is_allowed\": true,\n    \"user\": {\n        \"id\": 9,\n        \"username\": \"user@free.fr\"\n    }\n}\n * \n * \n */\n\n\nexport async function getUserName(){\n    let token = localStorage.getItem(\"token\");\n    if (token){\n    let  res = await validate(token);\n    if (res.ok){\n        let json = await res.json();\n        return json.user.username;\n        // need to add some management for error\n    }\n    }\n    // error need to be managed\n    else{return \"\";}\n\n}"],"names":[],"mappings":";;;;;;AAAA;;AAKO,eAAe,MAAM,IAAc;IACtC,OAAO,MACH,6HAAA,CAAA,YAAS,CAAC,KAAK,EAAE;QACjB,QAAQ;QACR,SAAS;YACD,gBAAgB;QAClB;QACN,MAAM,KAAK,SAAS,CAAC;YACjB,UAAU,OAAO,KAAK,GAAG,CAAC;YAC1B,UAAU,OAAO,KAAK,GAAG,CAAC;QAC9B;IACJ;AACJ;AAkBO,eAAe,SAAS,IAAc;IAEzC,OAAO,MAAM,6HAAA,CAAA,YAAS,CAAC,QAAQ,EAAC;QAC3B,QAAQ;QACR,SAAS;YACN,gBAAgB;QAClB;QACA,MAAM,KAAK,SAAS,CAAC;YACnB,UAAU,OAAO,KAAK,GAAG,CAAC;YAC1B,OAAO,OAAO,KAAK,GAAG,CAAC;YACvB,UAAU,OAAO,KAAK,GAAG,CAAC;QAC9B;IACJ;AACJ;AAIO,eAAe,SAAS,KAAa;IAExC,OAAO,MAAM,6HAAA,CAAA,YAAS,CAAC,QAAQ,EAAC;QAC3B,QAAQ;QACR,SAAS;YACN,iBAAiB,WAAS;YAC1B,gBAAgB;QAClB;QACF,UAAU;IACd;AACJ;AAgBO,eAAe;IAClB,IAAI,QAAQ,aAAa,OAAO,CAAC;IACjC,IAAI,OAAM;QACV,IAAK,MAAM,MAAM,SAAS;QAC1B,IAAI,IAAI,EAAE,EAAC;YACP,IAAI,OAAO,MAAM,IAAI,IAAI;YACzB,OAAO,KAAK,IAAI,CAAC,QAAQ;QACzB,wCAAwC;QAC5C;IACA,OAEI;QAAC,OAAO;IAAG;AAEnB"}},
    {"offset": {"line": 85, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 91, "column": 0}, "map": {"version":3,"sources":["file:///home/hedil/master/aws/Projet-AWS/frontend/src/app/%28layout-app%29/auth/login/page.tsx"],"sourcesContent":["\"use client\"\n\nimport Link from \"next/link\";\nimport \"./login.css\"\nimport {  FormEvent, useState } from \"react\";\nimport { login } from \"@/services/auth\";\nimport { useRouter } from 'next/navigation';\n\n\nexport default function Login() {\n    const router = useRouter(); // handle change of url\n    const [pending, setPending] = useState<boolean>(false)\n    const [email, setEmail] = useState<string>('');\n    const [password, setPassword] = useState<string>('');\n    const [error, setError] = useState<string|null>(null);\n    \n\n    const handleSubmit = async (f: FormEvent<HTMLFormElement>) => {\n        f.preventDefault(); // so we dont have reload\n        const e = new FormData(f.currentTarget);\n        console.log(\"RESPONSEFORM\" , e);\n        console.log(\"email :\", e.get(\"email\"));\n        console.log(\"password :\", e.get(\"password\"));\n       // redirect('/videoConference');\n        if (pending) {\n            console.log(\"PENDING\");\n            return \n        }\n        setPending(true)\n        try {\n            console.log(\"LOGIN STARTING\");\n            let res = await login(e);\n            console.log(\"RESPONSE\" , res);\n            console.log(\"RESPONSE IS OK :\" ,res.ok);\n            if (res.ok){\n                console.log(\"IN RES OK\");\n                \n                \n                let json = await res.json();\n                // make sure that token is inside provided json\n                if (json.hasOwnProperty(\"access_token\")){\n                 //   localStorage.setItem(\"token\",json.token);\n                    localStorage.setItem(\"access\", json.access);\n                    localStorage.setItem(\"refresh\", json.refresh);\n                }\n                router.push('/userPage');\n                \n            \n            }else{\n                console.log(\"LOGIN ERROR\");\n                setError(\"mot de passe ou email erroné\");\n            }\n        } catch (error) {\n            console.log(\"LOGIN EROOR\", error);\n            setTimeout(() => setError(null), 1500)\n            setError(\"mot de passe ou email erroné !\");\n        }\n        setPending(false)\n    }\n\n    return (\n      <div className=\"auth container\">\n        <div className=\"auth-wrapper\">\n        <h1>Connexion</h1>\n        <p>Se connecter pour passer des appels d'une autre maniere</p>\n        {error && <p className=\"message msg-error text-center\">{error}</p>}\n        <form onSubmit={handleSubmit} method=\"post\">\n            <div className=\"form-group\">\n                <label htmlFor=\"email\" className=\"form-label\">Email</label>\n                <div className=\"form-input\">\n                    <input type=\"email\" required value={email} onChange={(e) => setEmail(e.target.value)} name=\"email\" id=\"email\" autoComplete=\"false\" placeholder=\"ex: mymeet@gmail.com\" />\n                </div>\n            </div>\n            <div className=\"form-group\">\n                <label htmlFor=\"password\" className=\"form-label\">Mot de passe</label>\n                <div className=\"form-input\">\n                    <input type=\"password\" required value={password} onChange={(e) => setPassword(e.target.value)} name=\"password\" autoComplete=\"false\" id=\"password\" placeholder=\"votre mot de passe\" />\n                </div>\n            </div>\n\n            <button className={\"btn btn-main jc-c ai-c \"+(pending ? \"disable\" : \"\")} type=\"submit\">{pending ? \"Loading...\" : \"Se connecter\"}</button>\n            \n            <Link href={\"/auth/register\"}>Pas encore membre ? <span className=\"clr_main\">s&apos;inscrire</span></Link>\n        </form>\n      </div>\n      </div>\n    );\n  }"],"names":[],"mappings":";;;;AAEA;AAEA;AACA;AACA;;;AANA;;;;;;AASe,SAAS;;IACpB,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD,KAAK,uBAAuB;IACnD,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAW;IAChD,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAU;IAC3C,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAU;IACjD,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAe;IAGhD,MAAM,eAAe,OAAO;QACxB,EAAE,cAAc,IAAI,yBAAyB;QAC7C,MAAM,IAAI,IAAI,SAAS,EAAE,aAAa;QACtC,QAAQ,GAAG,CAAC,gBAAiB;QAC7B,QAAQ,GAAG,CAAC,WAAW,EAAE,GAAG,CAAC;QAC7B,QAAQ,GAAG,CAAC,cAAc,EAAE,GAAG,CAAC;QACjC,gCAAgC;QAC/B,IAAI,SAAS;YACT,QAAQ,GAAG,CAAC;YACZ;QACJ;QACA,WAAW;QACX,IAAI;YACA,QAAQ,GAAG,CAAC;YACZ,IAAI,MAAM,MAAM,CAAA,GAAA,0HAAA,CAAA,QAAK,AAAD,EAAE;YACtB,QAAQ,GAAG,CAAC,YAAa;YACzB,QAAQ,GAAG,CAAC,oBAAoB,IAAI,EAAE;YACtC,IAAI,IAAI,EAAE,EAAC;gBACP,QAAQ,GAAG,CAAC;gBAGZ,IAAI,OAAO,MAAM,IAAI,IAAI;gBACzB,+CAA+C;gBAC/C,IAAI,KAAK,cAAc,CAAC,iBAAgB;oBACvC,8CAA8C;oBAC3C,aAAa,OAAO,CAAC,UAAU,KAAK,MAAM;oBAC1C,aAAa,OAAO,CAAC,WAAW,KAAK,OAAO;gBAChD;gBACA,OAAO,IAAI,CAAC;YAGhB,OAAK;gBACD,QAAQ,GAAG,CAAC;gBACZ,SAAS;YACb;QACJ,EAAE,OAAO,OAAO;YACZ,QAAQ,GAAG,CAAC,eAAe;YAC3B,WAAW,IAAM,SAAS,OAAO;YACjC,SAAS;QACb;QACA,WAAW;IACf;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACf,6LAAC;8BAAG;;;;;;8BACJ,6LAAC;8BAAE;;;;;;gBACF,uBAAS,6LAAC;oBAAE,WAAU;8BAAiC;;;;;;8BACxD,6LAAC;oBAAK,UAAU;oBAAc,QAAO;;sCACjC,6LAAC;4BAAI,WAAU;;8CACX,6LAAC;oCAAM,SAAQ;oCAAQ,WAAU;8CAAa;;;;;;8CAC9C,6LAAC;oCAAI,WAAU;8CACX,cAAA,6LAAC;wCAAM,MAAK;wCAAQ,QAAQ;wCAAC,OAAO;wCAAO,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;wCAAG,MAAK;wCAAQ,IAAG;wCAAQ,cAAa;wCAAQ,aAAY;;;;;;;;;;;;;;;;;sCAGvJ,6LAAC;4BAAI,WAAU;;8CACX,6LAAC;oCAAM,SAAQ;oCAAW,WAAU;8CAAa;;;;;;8CACjD,6LAAC;oCAAI,WAAU;8CACX,cAAA,6LAAC;wCAAM,MAAK;wCAAW,QAAQ;wCAAC,OAAO;wCAAU,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;wCAAG,MAAK;wCAAW,cAAa;wCAAQ,IAAG;wCAAW,aAAY;;;;;;;;;;;;;;;;;sCAItK,6LAAC;4BAAO,WAAW,4BAA0B,CAAC,UAAU,YAAY,EAAE;4BAAG,MAAK;sCAAU,UAAU,eAAe;;;;;;sCAEjH,6LAAC,+JAAA,CAAA,UAAI;4BAAC,MAAM;;gCAAkB;8CAAoB,6LAAC;oCAAK,WAAU;8CAAW;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAKvF;GA9EsB;;QACL,qIAAA,CAAA,YAAS;;;KADJ"}},
    {"offset": {"line": 317, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 327, "column": 0}, "map": {"version":3,"sources":["file:///home/hedil/master/aws/Projet-AWS/frontend/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0]}},
    {"offset": {"line": 328, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}